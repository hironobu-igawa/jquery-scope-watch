/*!
 * jquery-scope-watch v0.0.0 - Watch the value, and to applied.
 * Copyright 2015 hironobu-igawa
 * license MIT
 */
var scope;!function(t){var e=function(){function t(e,n){this.valueGetter=e,this.apply=n,this.newValue=this.oldValue=t.copy(this.valueGetter())}return t.copy=function(t){if(null==t||"object"!=typeof t)return t;if(Array.isArray(t)){var e=[];return t.forEach(function(t,n){return e[n]=t}),e}var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n},t.prototype.call=function(){var e=this.valueGetter();this.oldValue=this.newValue,this.newValue=t.copy(this.valueGetter()),this.isChange()&&this.apply(e,this.oldValue)},t.prototype.isChange=function(){var t=this;return null==this.newValue||"object"!=typeof this.newValue?this.newValue!==this.oldValue:Object.keys(this.newValue).concat(Object.keys(this.oldValue)).some(function(e){return t.newValue[e]!==t.oldValue[e]})},t}();t.CollectionWatcher=e}(scope||(scope={}));var scope;!function(t){var e=function(){function e(){this.parent=void 0,this.children=[],this.watchers=[],this.destroyed=!1}return e.generate=function(){return this.root.generate()},e.watch=function(t,e){return this.root.watch(t,e)},e.watchCollection=function(t,e){return this.root.watchCollection(t,e)},e.apply=function(){this.root.apply()},e.destroy=function(){this.root.destroy()},e.prototype.generate=function(){var t=Object.create(this);return t.parent=this,this.children.push(t),t},e.prototype.watch=function(e,n){var r,o=this;switch(typeof e){case"string":r=function(){return o.parse(e)};break;case"Function":r=e;break;default:r=function(){return e}}var i=new t.Watcher(r,n);return this.watchers.push(i),function(){o.watchers.splice(o.watchers.indexOf(i),1)}},e.prototype.watchCollection=function(e,n){var r,o=this;switch(typeof e){case"string":r=function(){return o.parse(e)};break;case"Function":r=e;break;default:r=function(){return e}}var i=new t.CollectionWatcher(r,n);return this.watchers.push(i),function(){o.watchers.splice(o.watchers.indexOf(i),1)}},e.prototype.apply=function(){this.watchers.forEach(function(t){return t.call()}),this.children.forEach(function(t){return t.apply()})},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,$.extend([],this.children).forEach(function(t){return t.destroy()}),this.parent&&this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent=null,this.children=null,this.watchers=null,this===e.root&&(e._root=void 0))},e.prototype.parse=function(t){return t.split(".").reduce(function(t,e){return t&&t[e]},this)},Object.defineProperty(e,"root",{get:function(){return e._root||(e._root=new e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return e.root},enumerable:!0,configurable:!0}),e}();t.Scope=e}(scope||(scope={}));var scope;!function(t){$.scope=t.Scope}(scope||(scope={}));var scope;!function(t){var e=function(){function t(t,e){this.valueGetter=t,this.apply=e,this.newValue=this.oldValue=this.valueGetter()}return t.prototype.call=function(){this.oldValue=this.newValue,this.newValue=this.valueGetter(),this.isChange()&&this.apply(this.newValue,this.oldValue)},t.prototype.isChange=function(){return this.newValue!==this.oldValue},t}();t.Watcher=e}(scope||(scope={}));